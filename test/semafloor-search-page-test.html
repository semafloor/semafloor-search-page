<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>
    <link rel="import" href="../../iron-test-helpers/mock-interactions.html">

    <!-- Step 1: import the element to test -->
    <link rel="import" href="../semafloor-search-page.html">
  </head>
  <body>

    <!-- You can use the document as a place to set up your fixtures. -->
    <test-fixture id="search">
      <template strip-whitespace>
        <semafloor-search-page></semafloor-search-page>
      </template>
    </test-fixture>

    <script>
      var el;

      suite('<semafloor-search-page>', function() {
        setup(function() {
          el = fixture('search');
        });

        test('uid should be undefined on first init', function() {
          assert.isUndefined(el.uid);
        });
      });

      suite('Load elements dynamically', function() {
        setup(function() {
          el = fixture('search');
        });

        test('#fromDate dialog is null on first init', function() {
          var _dialog = Polymer.dom(el).querySelector('#fromDate');

          assert.isUndefined(el._isFromDateOpened);
          assert.isNull(_dialog);
        });

        test('#toDate dialog is null on first init', function() {
          var _dialog = Polymer.dom(el).querySelector('#toDate');

          assert.isUndefined(el._isToDateOpened);
          assert.isNull(_dialog);
        });

        test('#fromTime dialog is null on first init', function() {
          var _dialog = Polymer.dom(el).querySelector('#fromTime');

          assert.isUndefined(el._isFromTimeOpened);
          assert.isNull(_dialog);
        });

        test('#toTime dialog is null on first init', function() {
          var _dialog = Polymer.dom(el).querySelector('#toTime');

          assert.isUndefined(el._isToTimeOpened);
          assert.isNull(_dialog);
        });

        test('#addSiteDialog is null on first init', function() {
          var _dialog = Polymer.dom(el).querySelector('#addSiteDialog');

          assert.isUndefined(el._isSiteOpened);
          assert.isNull(_dialog);
        });

        test('#addFloorDialog is null on first init', function() {
          var _dialog = Polymer.dom(el).querySelector('#addFloorDialog');

          assert.isUndefined(el._isFloorOpened);
          assert.isNull(_dialog);
        });

        test('more options button on first init', function() {
          assert.isTrue(el._isMoreOptionsOpened);
        });

        test('responseDialog is null on first init', function() {
          var _dialog = Polymer.dom(el).querySelector('responseDialog');

          assert.isNull(_dialog);
        });
      });

      // suite('button-tap', function() {
      //   setup(function() {
      //     el = fixture('search');
      //   });
      //
      //   test('button pressed', function(done) {
      //     _btn = el.querySelector('.send-button');
      //     if (_btn === null) {
      //       _btn = Polymer.dom(el.root).querySelector('.send-button');
      //     }
      //
      //     var _test = function(ev) {
      //       el.debounce('_test', function() {
      //         var _type = ev.type;
      //         if (_type === 'tap') {
      //           assert.isTrue(el._readyToSendParams);
      //         }else {
      //           var _dialog = el.querySelector('#responseDialog');
      //           if (_dialog === null) {
      //             _dialog = Polymer.dom(el.root).querySelector('#responseDialog');
      //           }
      //           assert.isFalse(el._readyToSendParams);
      //           assert.isTrue(_dialog instanceof HTMLElement);
      //           done();
      //         }
      //       }, 1);
      //     };
      //
      //     _btn.addEventListener('tap', _test);
      //     _btn.addEventListener('transitionend', _test);
      //
      //     MockInteractions.tap(_btn);
      //   });
      // });
    </script>

  </body>
</html>
